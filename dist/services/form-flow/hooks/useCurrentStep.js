"use strict";var S=Object.defineProperty;var I=Object.getOwnPropertyDescriptor;var T=Object.getOwnPropertyNames;var y=Object.prototype.hasOwnProperty;var M=(o,e)=>{for(var r in e)S(o,r,{get:e[r],enumerable:!0})},V=(o,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let t of T(e))!y.call(o,t)&&t!==r&&S(o,t,{get:()=>e[t],enumerable:!(n=I(e,t))||n.enumerable});return o};var w=o=>V(S({},"__esModule",{value:!0}),o);var N={};M(N,{useCurrentStep:()=>B});module.exports=w(N);var d=require("react");var P=require("react"),g=({flowStore:o,currentStep:e})=>(0,P.useMemo)(()=>{var a,p,F,x,v;let r=o.getHead(),n=o.getTail(),t=(e==null?void 0:e.index)===(r==null?void 0:r.index),l=(e==null?void 0:e.index)===(n==null?void 0:n.index),C=(p=(a=e==null?void 0:e.previousStep)==null?void 0:a.identifier)!=null?p:null,u=(F=e==null?void 0:e.identifier)!=null?F:null,f=(v=(x=e==null?void 0:e.nextStep)==null?void 0:x.identifier)!=null?v:null;return{isFirstStep:t,isLastStep:l,previousStepIdentifier:C,currentStepIdentifier:u,nextStepIdentifier:f}},[e]);function B({flowStore:o,getFields:e,updateFields:r,isFormFlowResumable:n}){let[t,l]=(0,d.useState)(null),C=(0,d.useMemo)(()=>{let F=t==null?void 0:t.Component;return F?()=><F storeFields={e()}updateStoreFields={r}moveToNextStep={f}moveToPreviousStep={a}moveToStepByIdentifier={p}/>:()=><></>},[t]),u=g({flowStore:o,currentStep:t});(0,d.useEffect)(()=>{let F=n?o.getLastIncompleteStep(e()):o.getHead();l(F)},[]);let f=()=>{let F=o.getNextValidStep(t,e());l(F)},a=()=>{let F=o.getPreviousValidStep(t,e());l(F)},p=F=>{let x=o.getStepByIdentifier(F);l(x)};return{currentStep:t,meta:u,CurrentStepView:C,moveToNextValidStep:f,moveToPreviousValidStep:a,moveToStepByIdentifier:p}}0&&(module.exports={useCurrentStep});
